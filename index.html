<!DOCTYPE html>
<html lang="vi">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>M·ªôt b·ª©c th∆∞ üíå</title>

<style>
*{margin:0;padding:0;box-sizing:border-box;font-family:'Segoe UI',sans-serif;}

body{
  height:100vh;
  background:linear-gradient(135deg,#ff9a9e,#fad0c4);
  display:flex;
  justify-content:center;
  align-items:center;
  overflow:hidden;
}

/* ===== KHUNG TH∆Ø ===== */
.scene{
  position:relative;
  width:100%;
  height:100%;
  display:flex;
  justify-content:center;
  align-items:center;
  transition:opacity .8s ease; /* üî• m·ªù d·∫ßn */
}

.scene.fade-out{
  opacity:0;
}

.letter-wrapper{
  width:320px;
  text-align:center;
  z-index:5;
}

.envelope{
  width:100%;
  height:200px;
  background:#ff4d6d;
  border-radius:18px;
  box-shadow:0 15px 30px rgba(0,0,0,.25);
  position:relative;
  overflow:hidden;
}

/* ·∫£nh trong th∆∞ */
.letter-img{
  position:absolute;
  inset:20px;
  width:calc(100% - 40px);
  height:calc(100% - 40px);
  object-fit:cover;
  border-radius:12px;
  opacity:0;
  transform:scale(.4);
  transition:opacity .6s ease, transform .8s ease;
}

/* gi·∫•y th∆∞ */
.paper{
  position:absolute;
  inset:20px;
  background:white;
  border-radius:12px;
  padding:18px;
  opacity:0;
  transform:translateY(40px);
  transition:.8s ease;
}

.paper p{
  color:#ff4d6d;
  font-size:14px;
  line-height:1.6;
}

/* n√∫t */
#actionBtn{
  margin-top:18px;
  padding:10px 26px;
  border:none;
  border-radius:999px;
  background:#ff4d6d;
  color:white;
  font-size:15px;
  cursor:pointer;
}

/* ===== TR·∫†NG TH√ÅI ===== */
.show-text .paper{
  opacity:1;
  transform:translateY(0);
}

.show-img .letter-img{
  opacity:1;
  transform:scale(1);
}

/* ===== TIM ===== */
.heart{
  position:fixed;
  font-size:16px;
  pointer-events:none;
  animation:heartFly 2s ease-out forwards;
}

@keyframes heartFly{
  from{transform:translateY(0) scale(1);opacity:1}
  to{transform:translateY(-220px) scale(1.8);opacity:0}
}

/* ===== B∆Ø·ªöM ===== */
.butterfly{
  position:fixed;
  font-size:24px;
  pointer-events:none;
  animation:butterFly 3s ease-out forwards;
}

@keyframes butterFly{
  from{transform:translate(0,0);opacity:1}
  to{transform:translate(var(--x),var(--y));opacity:0}
}

/* ===== ·∫¢NH CHE M√ÄN ===== */
.fullscreen{
  position:fixed;
  inset:0;
  width:100vw;
  height:100vh;
  object-fit:cover;
  z-index:50;
  transform:scale(1);
  transition:transform 1.2s ease;
}
.fullscreen.zoom{transform:scale(2.2);}
</style>
</head>

<body>

<div class="scene" id="scene">
  <div class="letter-wrapper show-img" id="letter">
    <div class="envelope">
      <img src="z7310320002736_7280947394653cd43b8a0a3cc6e92b60.jpg" class="letter-img" id="letterImg">
      <div class="paper">
        <p>
          G·ª≠i em üíñ<br><br>
          C√≥ nh·ªØng ƒëi·ªÅu r·∫•t nh·ªè th√¥i,<br>
          nh∆∞ng l·∫°i khi·∫øn anh nh·ªõ m√£i‚Ä¶<br>
          C·∫£m ∆°n em ƒë√£ ƒë·ªçc ƒë·∫øn ƒë√¢y ‚ú®
        </p>
      </div>
    </div>
    <button id="actionBtn">üíå M·ªü th∆∞</button>
  </div>
</div>

<script>
document.addEventListener("DOMContentLoaded",()=>{
  const scene=document.getElementById("scene");
  const letter=document.getElementById("letter");
  const btn=document.getElementById("actionBtn");
  const img=document.getElementById("letterImg");
  let step=0;

  function heart(x,y){
    const h=document.createElement("div");
    h.className="heart";
    h.innerText="üíñ";
    h.style.left=x+"px";
    h.style.top=y+"px";
    document.body.appendChild(h);
    setTimeout(()=>h.remove(),2000);
  }

  function butterfly(){
    const b=document.createElement("div");
    b.className="butterfly";
    b.innerText="ü¶ã";
    b.style.left=Math.random()*innerWidth+"px";
    b.style.top=Math.random()*innerHeight+"px";
    b.style.setProperty("--x",(Math.random()*300-150)+"px");
    b.style.setProperty("--y",(-200-Math.random()*200)+"px");
    document.body.appendChild(b);
    setTimeout(()=>b.remove(),3000);
  }

  btn.addEventListener("click",(e)=>{
    if(step===0){
      letter.classList.add("show-text");
      btn.innerText="‚ú® Xem ti·∫øp";
      step=1;
    }else{
      // tim + b∆∞·ªõm
      for(let i=0;i<10;i++){
        setTimeout(()=>heart(e.clientX,e.clientY),i*80);
        setTimeout(butterfly,i*120);
      }

      // m·ªù d·∫ßn to√†n c·∫£nh
      scene.classList.add("fade-out");

      // ·∫£nh bung che m√†n
      setTimeout(()=>{
        const clone=img.cloneNode(true);
        clone.classList.add("fullscreen");
        document.body.appendChild(clone);
        requestAnimationFrame(()=>clone.classList.add("zoom"));
      },400);

      // sang index
      setTimeout(()=>{
        window.location.href="thu.html";
      },1500);
    }
  });
});
/* ===== CLICK ·ªû ƒê√ÇU C≈®NG BUNG TIM ===== */
document.addEventListener("click",(e)=>{
  // tr√°nh spam khi ƒëang chuy·ªÉn trang
  if(document.body.classList.contains("transitioning")) return;

  for(let i=0;i<6;i++){
    const h=document.createElement("div");
    h.className="heart";
    h.innerText="üíñTrang";
    h.style.left=e.clientX+"px";
    h.style.top=e.clientY+"px";
    h.style.transform=
      `translate(${Math.random()*120-60}px,${Math.random()*120-60}px)`;
    document.body.appendChild(h);
    setTimeout(()=>h.remove(),2000);
  }
});
/* ===== B∆Ø·ªöM BAY N·ªÄN (LU√îN C√ì) ===== */
function spawnButterfly(){
  if(document.querySelectorAll(".butterfly").length > 24) return;

  const b=document.createElement("div");
  b.className="butterfly";
  b.innerText="ü¶ã";

  b.style.left=Math.random()*window.innerWidth+"px";
  b.style.top=window.innerHeight+40+"px";
  b.style.setProperty("--x",(Math.random()*300-150)+"px");
  b.style.setProperty("--y",(-300-Math.random()*200)+"px");

  document.body.appendChild(b);
  setTimeout(()=>b.remove(),3000);
}

// t·∫°o b∆∞·ªõm ƒë·ªÅu ƒë·ªÅu, r·∫•t nh·∫π
setInterval(()=>{
  if(!document.hidden) spawnButterfly();
},900);

</script>

</body>
</html>

